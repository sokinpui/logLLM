# MCP: Schemas (`schemas.py`)

## File: `src/logllm/mcp/schemas.py`

This file contains the core Pydantic models that define the data structures for the Modern Context Protocol.

### Context Schemas

#### `ContextItemType(str, Enum)`

An enumeration of predefined context types to ensure consistency. It is extensible and also supports custom string types.

- **Examples**: `USER_QUERY`, `LOG_DATA_PARSED`, `LOG_SUMMARY`, `TOOL_RESULT`, `AGENT_STATE`.

#### `ContextMetadata(BaseModel)`

A model for metadata associated with each `ContextItem`.

- **Fields**:
  - `source_component: Optional[str]`: The component that generated the context (e.g., `'ErrorSummarizerAgent'`).
  - `tags: List[str]`: Descriptive tags for filtering and categorization.
  - `relevance_score: Optional[float]`: A score indicating the item's relevance to a task.
  - `related_item_ids: List[str]`: IDs of other related `ContextItem`s.

#### `ContextItem(BaseModel)`

The fundamental unit of information in MCP.

- **Fields**:
  - `id: str`: A unique UUID for the context item.
  - `type: Union[ContextItemType, str]`: The type of the context.
  - `timestamp: datetime`: When the item was created.
  - `data: Any`: The actual payload, which can be a simple string, a dictionary, or another Pydantic model.
  - `metadata: ContextMetadata`: Associated metadata.

#### `ContextPayload(BaseModel)`

A container for a list of `ContextItem` objects, representing the complete context for a given operation.

- **Fields**:
  - `items: List[ContextItem]`: The list of context items.
  - `payload_metadata: Optional[Dict[str, Any]]`: Global metadata for the entire payload.

### Tool-Related Schemas

These schemas define a standardized way to represent tools and their interactions, making them understandable to both the system and to LLMs.

#### `MCPToolParameterSchema(BaseModel)`

Defines a single parameter for a tool.

- **Fields**:
  - `type: str`: The parameter's data type (e.g., 'string', 'integer', 'boolean').
  - `description: Optional[str]`: A description of the parameter.
  - `required: bool`: Whether the parameter is mandatory.
  - `enum`, `items`, `properties`: For more complex type definitions.

#### `MCPToolDefinition(BaseModel)`

Describes a tool that can be invoked by the system or an LLM.

- **Fields**:
  - `name: str`: The unique, callable name of the tool (e.g., `'fetch_logs_from_elasticsearch'`).
  - `description: str`: A clear explanation of what the tool does and when it should be used.
  - `parameters: Optional[Dict[str, MCPToolParameterSchema]]`: A dictionary defining the tool's parameters.

#### `MCPToolCall(BaseModel)`

Represents a request to execute a tool. This is typically generated by an LLM.

- **Fields**:
  - `id: str`: A unique ID for this specific call instance.
  - `tool_name: str`: The name of the tool to invoke.
  - `arguments: Dict[str, Any]`: The arguments to pass to the tool.

#### `MCPToolResult(BaseModel)`

Represents the output of a tool execution.

- **Fields**:
  - `call_id: str`: The ID of the `MCPToolCall` that this result answers.
  - `tool_name: str`: The name of the tool that was invoked.
  - `output: Any`: The data returned by the tool.
  - `is_error: bool`: A flag indicating if the tool execution failed.
  - `error_message: Optional[str]`: The error message if `is_error` is true.
